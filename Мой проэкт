// import * as readline from 'node:readline/promises';
// import { stdin as input, stdout as output } from 'node:process';

import {Interface} from "ethers";
import * as readline from "node:readline";
import {derivePrivateKeys} from "hardhat/internal/core/providers/util";

const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
})

console.log("[Претендент! Добро пожаловать в '?????'. Приготовься к своему Первому Испытанию...]")

function clearScreen() {
    const execSync = require('child_process').execSync;
    setTimeout(clearScreen, 35000);
    if (process.platform === 'win32') {
        execSync('cls', { stdio: 'inherit' })
    } else {
        execSync('clear', { stdio: 'inherit' });
    }
}

function showMenu(){
    clearScreen();
    console.log(`
    Твоё испытание начинается! Открой глаза испытуемый 274516149601.
    1 - "Вы медленно открываете глаза и осматриваетесь"
    2 - "Что... что за? Где вы?!"
    3 - "Аспект? Что это..."
    4 - "Раб ???"
    `);
}


function handleCommand(command:string) {
    switch(command.trim()){
        case '1':
            clearScreen();
            console.log("Вам приснилась гора. \n" +
                "Скалистая и одинокая, она возвышалась над другими вершинами горной цепи, рассекая своими острыми краями ночное небо. Сияющая луна освещала её склоны призрачным бледным светом.\n" +
                "На одном из склонов остатки старой дороги упрямо вцепились в поверхность горы. То тут, то там сквозь снег виднелись выветренные мощёные камни. Справа от дороги неприступной стеной возвышалась отвесная скала. Слева безмолвное чёрное море небытия указывало на бесконечную пропасть. Сильные ветра снова и снова врезались в гору, завывая в бессильной ярости.\n" +
                "Внезапно луна скрылась за горизонтом. Солнце взошло на западе, пронеслось по небу и исчезло на востоке. Снежинки поднимались с земли и возвращались в объятия облаков. Вы поняли, что видите обратное течение времени.\n" +
                "В одно мгновение пролетели сотни лет. Снег отступил, обнажив старую дорогу. Холодная дрожь пробежала по вашей спине, когда ты заметил валяющиеся на земле человеческие кости. Мгновение спустя кости исчезли, а на их месте возник караван рабов. Караван, под грохот цепей, двигался в обратном направлении вниз по горе.\n" +
                "Время замедлилось, остановилось, а затем возобновило свой обычный ход.\n" +
                "[Претендент! Добро пожаловать в '?????' . Приготовься к Первому Испытанию...]")
            break;
        case '2':
            clearScreen();
            console.log("Шаг. Шаг. Ещё один шаг.\n" +
                "Тупая боль отдавалась в кровоточащих ногах, в то время как ваше тело дрожал от холода. Изношенная туника была почти бесполезна против пронизывающего ветра, а запястья были главным источником мучений: сильно пострадавшие от железных кандалов, они отдавались резкой болью каждый раз, когда ледяной металл касался повреждённой кожи.\n" +
                "'Что это за ситуация?!'\n" +
                "Подняв взгляд, вы заметили длинную цепь, извивающуюся вверх по дороге. К цепи с небольшими промежутками были прикованы десятки людей с впалыми глаза — такие же рабы, как и вы. Впереди него размеренной походкой шёл человек с широкими плечами и окровавленной спиной. Позади него пронырливый на вид парень, с бегающими отчаянными глазами, тихо ругался себе под нос на языке, которого вы не знали, но каким-то образом всё же понимали. Время от времени мимо проезжали вооружённые всадники, одетые в доспехи в старинном стиле, бросая на рабов грозные взгляды.\n" +
                "Как ни оценивай, всё было очень плохо.\n" +
                "Но в чем была странность, вы были в недоумении, но не в панике.Вы не знаете почему, но вы не ощущаете страха. Но вам казалось что эти обстоятельства не были похожи на то, каким должны быть Первое Испыьание. Обычно новоизбранные претенденты попадали в сценарий, который предоставлял им достаточно широкие возможности: они становились членами привилегированных или воинских каст, с широким доступом к необходимому оружию, чтобы хотя бы попытаться разрешить любой конфликт.\n" +
                "Начало испытания в качестве беспомощного раба, закованного в кандалы и уже полумёртвого, было настолько далёким от идеала, насколько можно было себе представить.\n" +
                "Однако '?????' в равной степени с вызовом не забывало и о балансе. Как говорил ?неизвестный?, оно создавало испытания, а не казни. Поэтому вы были уверены, что в противовес этому ужасному началу, оно наградит его чем-то хорошим. По крайней мере, мощным Аспектом.\n" +
                "Вы не понимаете почему вы знаете это, как будто вся эта инфорация была насильно вбита в вашу голову. Но вас мучал еще один вопрос... Кто ВЫ?");
            break;
        case '3':
            console.log("Что ж, посмотрим... но как вы это сделаете?'\n" +
                "Вспомнив популярные веб-комиксы, которые вы читали в детстве, Вы сосредоточились и подумали о таких словах, как «статус», «вы» и «информация». И действительно, как только вы это сделали, перед вами прямо в воздухе появились мерцающие руны. И снова, хотя вы и не знали этого древнего алфавита, его смысл был каким-то образом понятен.\n" +
                "Вы быстро нашли нечто, описывающее ваш Аспект... и, наконец, потеряли самообладание.\n" +
                "'Что?! Какого хрена?!'");
            break;
        case '4':
            console.log("Перед вами появился ваш статус, и он гласил,,," +
                "Имя: Вы.\n" +
                "Истинное Имя: —\n" +
                "Ранг: Претендент.\n" +
                "Ядро Души: ?Неизвестно?.\n" +
                "Воспоминания: 27%\n" +
                "Эхо: —\n" +
                "Атрибуты: [Судьбоносный], [Метка ???], [Дитя ????].\n" +
                "Аспект: [Раб ???].\n" +
                "Описание Аспекта: [Раб — никчёмный человек, не обладающий ни навыками, ни способностями, достойными упоминания. Раб ??? — то же самое, только гораздо реже].\n" +
                "Потеряв дар речи, Вы уставились на руны, пытаясь убедить себя, что, возможно, ему просто мерещится. Он наверняка не мог быть настолько невезучим... верно?\n" +
                "'Не бывает бесполезных Аспектов, твою мать!'");
            break;
        case '3':
            console.log("Что ж, посмотрим... но как вы это сделаете?'\n" +
                "Вспомнив популярные веб-комиксы, которые вы читали в детстве, Вы сосредоточились и подумали о таких словах, как «статус», «вы» и «информация». И действительно, как только вы это сделали, перед вами прямо в воздухе появились мерцающие руны. И снова, хотя вы и не знали этого древнего алфавита, его смысл был каким-то образом понятен.\n" +
                "Вы быстро нашли нечто, описывающее ваш Аспект... и, наконец, потеряли самообладание.\n" +
                "'Что?! Какого хрена?!'");
            rl.close();
            return;
        default:
            console.log("Неверная команда, попробуйте снова!");
    }
    let temp = rl.question("Введите что-нибудь для того, что бы продолжить",() => {
        promptUser()
    })
}



function promptUser(){
    setTimeout(showMenu,1000)
    setTimeout(() => {
        rl.question('Продолжить:', handleCommand);},1000)
}


promptUser();

