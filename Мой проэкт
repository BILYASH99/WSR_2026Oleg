// import * as readline from 'node:readline/promises';
// import { stdin as input, stdout as output } from 'node:process';

import {Interface} from "ethers";
import * as readline from "node:readline";
import {derivePrivateKeys} from "hardhat/internal/core/providers/util";

const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
})

console.log("[Претендент! Добро пожаловать в '?????'. Приготовься к своему Первому Испытанию...]")

function clearScreen() {
    const execSync = require('child_process').execSync;
    setTimeout(clearScreen, 35000);
    if (process.platform === 'win32') {
        execSync('cls', { stdio: 'inherit' })
    } else {
        execSync('clear', { stdio: 'inherit' });
    }
}

function showMenu(){
    clearScreen();
    console.log(`
    Твоё испытание начинается! Открой глаза испытуемый 27???????????.
    1 - "Вы медленно открываете глаза и осматриваетесь"
    2 - "Что... что за? Где вы?!"
    3 - "Аспект? Что это..."
    4 - "Раб ???"
    5 - "Избранный ???"
    6 - "Атрибуты"
    7 - "Лагерь Рабов"
    8 - "Вы и ВЫ"
    9 - "Тот кто отрицает"
    `);
}


function handleCommand(command:string) {
    switch(command.trim()){
        case '1':
            clearScreen();
            console.log("Вам приснилась гора. \n" +
                "Скалистая и одинокая, она возвышалась над другими вершинами горной цепи, рассекая своими острыми краями ночное небо. Сияющая луна освещала её склоны призрачным бледным светом.\n" +
                "На одном из склонов остатки старой дороги упрямо вцепились в поверхность горы. То тут, то там сквозь снег виднелись выветренные мощёные камни. Справа от дороги неприступной стеной возвышалась отвесная скала. Слева безмолвное чёрное море небытия указывало на бесконечную пропасть. Сильные ветра снова и снова врезались в гору, завывая в бессильной ярости.\n" +
                "Внезапно луна скрылась за горизонтом. Солнце взошло на западе, пронеслось по небу и исчезло на востоке. Снежинки поднимались с земли и возвращались в объятия облаков. Вы поняли, что видите обратное течение времени.\n" +
                "В одно мгновение пролетели сотни лет. Снег отступил, обнажив старую дорогу. Холодная дрожь пробежала по вашей спине, когда ты заметил валяющиеся на земле человеческие кости. Мгновение спустя кости исчезли, а на их месте возник караван рабов. Караван, под грохот цепей, двигался в обратном направлении вниз по горе.\n" +
                "Время замедлилось, остановилось, а затем возобновило свой обычный ход.\n" +
                "[Претендент! Добро пожаловать в '?????' . Приготовься к Первому Испытанию...]")
            break;
        case '2':
            clearScreen();
            console.log("Шаг. Шаг. Ещё один шаг.\n" +
                "Тупая боль отдавалась в кровоточащих ногах, в то время как ваше тело дрожал от холода. Изношенная туника была почти бесполезна против пронизывающего ветра, а запястья были главным источником мучений: сильно пострадавшие от железных кандалов, они отдавались резкой болью каждый раз, когда ледяной металл касался повреждённой кожи.\n" +
                "'Что это за ситуация?!'\n" +
                "Подняв взгляд, вы заметили длинную цепь, извивающуюся вверх по дороге. К цепи с небольшими промежутками были прикованы десятки людей с впалыми глаза — такие же рабы, как и вы. Впереди вас размеренной походкой шёл человек с широкими плечами и окровавленной спиной. Позади него пронырливый на вид парень, с бегающими отчаянными глазами, тихо ругался себе под нос на языке, которого вы не знали, но каким-то образом всё же понимали.\n" +
                "Как ни оценивай, всё было очень плохо.\n" +
                "Но в чем была странность, вы были в недоумении, но не в панике.Вы не знаете почему, но вы не ощущаете страха. Но вам казалось что эти обстоятельства не были похожи на то, каким должны быть Первое Испытание. Обычно новоизбранные претенденты попадали в сценарий, который предоставлял им достаточно широкие возможности для прохождения первого Испытания.\n" +
                "Начало испытания в качестве беспомощного раба, закованного в кандалы и уже полумёртвого, было настолько далёким от идеала, насколько можно было себе представить.\n" +
                "Однако '?????' в равной степени с вызовом не забывало и о балансе. Как говорил ?неизвестный?, оно создавало испытания, а не казни. Поэтому вы были уверены, что в противовес этому ужасному началу, оно наградит его чем-то хорошим. По крайней мере, мощным Аспектом.\n" +
                "Вы не понимаете почему вы знаете это, как будто вся эта инфорация была насильно вбита в вашу голову. Но вас мучал еще один вопрос... Кто ВЫ?");
            break;
        case '3':
            clearScreen();
            console.log("Что ж, посмотрим... но как вы вызовите свой 'статус'?'\n" +
                "Вспомнив популярные веб-комиксы, которые вы читали в детстве, Вы сосредоточились и подумали о таких словах, как «статус», «вы» и «информация». И действительно, как только вы это сделали, перед вами прямо в воздухе появились мерцающие руны. И снова, хотя вы и не знали этого древнего алфавита, его смысл был каким-то образом понятен.\n" +
                "Вы быстро нашли нечто, описывающее ваш Аспект... и, наконец, потеряли самообладание.\n" +
                "'Что?! Какого хрена?!'");
            break;
        case '4':
            clearScreen();
            console.log("Перед вами появился ваш статус, и он гласил,,," +
                "Имя: Вы.\n" +
                "Истинное Имя: —\n" +
                "Ранг: Претендент.\n" +
                "Ядро Души: ?Неизвестно?.\n" +
                "Воспоминания: 4%\n" +
                "Эхо: —\n" +
                "Атрибуты: [Судьбоносный], [Метка ???], [Дитя ????].\n" +
                "Аспект: [Раб ???].\n" +
                "Описание Аспекта: [Раб — никчёмный человек, не обладающий ни навыками, ни способностями, достойными упоминания. Раб ??? — то же самое, только гораздо реже].\n" +
                "Потеряв дар речи, Вы уставились на руны, пытаясь убедить себя, что, возможно, ему просто мерещится. Он наверняка не мог быть настолько невезучим... верно?\n" +
                "'Не бывает бесполезных Аспектов, твою мать!'");
            break;
        case '5':
            clearScreen();
            console.log("Следующие несколько минут Вы пребывал в мрачном настроении. Но потом, вы справился с эмоциями и глубоко вдохнули, пытаясь насладиться свежим воздухом. Действительно, такой воздух было трудно найти в '????'.\n" +
                "И вот вы здесь, можете наслаждаться неограниченным количеством чистого вкусного воздуха.\n" +
                "Воистину, быть избранным '???' имеет свои преимущества.\n" +
                "Лишь бы только не было этого ужасающего холода, не болели ноги, и не мучились запястья и спина!\n" +
                "Караван рабов медленно поднимался в гору, всё больше рабов спотыкались и периодически падали на землю. Пару раз тех, кто уже не мог идти, освобождали с цепи и бесцеремонно сбрасывали с дороги влево, прямо в зияющую пропасть. Вы наблюдали за их падением с некоторым состраданием.\n" +
                "'Бедняги. Покойтесь с миром, несчастные души'.\n" +
                "В целом, вы были в хорошем настроении. Наверное... ВЫ не знаете точно.\n" +
                "Было немного странно чувствовать себя хорошо среди этого кошмара, но, к счастью, Вы почему то были готовы к таким событиям.\n" +
                "Но, ведь в конце концов, ВЫ не первый кто проходит это испытании.");
            break;
        case '6':
            clearScreen();
            console.log("Воспользовавшись случаем, Вы решил ещё раз взглянуть на свой статус и снова вызвали руны. В прошлый раз вы были слишком возмущёны Аспектом и плохо изучили Атрибуты. Хотя Атрибуты не были так важны как Аспект, но, они часто становятся решающим фактором между жизнью и смертью. Они представляли собой природные черты и сродства человека, иногда даже давали пассивные способности и эффекты.\n" +
                "Описание Атрибута [Судьбоносный]: «Нити судьбы крепко обвиваются вокруг вас. Маловероятные события, как хорошие, так и плохие, притягиваются вашим присутствием. Есть те, кто благословлён, и те, кто проклят... но очень редко и то и другое одновременно». \n" +
                "Описание Атрибута [Метка ???]: «Вы несёте на себе слабый след ???, как будто однажды, давным-давно, кто-то передал её вам».\n" +
                "Описание Атрибута [Дитя ????]: «????».\n" +
                "'Хммм... Интересно'.\n" +
                "Вы быстро проанализировали первый атрибут, [Судьбоносный], и предположили что именно он является главным виновником вашего затруднительного положения. На первый взгляд казалось, что вам была предначертана определённая судьба — например, погибнуть несчастной смертью и бесследно исчезнуть. Но, прочитав описание, вы понял, что быть судьбоносным значит, что поблизости от вас с большим шансом могут произойти невероятные вещи.\n" +
                "'Наверное, именно так мне удалось получить один из очень редких и бесполезных Аспектов.'\n" +
                "Если [Судьбоносный] был его врождённым Атрибутом, то два других пришли из Аспекта [Раб ???]. Атрибут [Метка ???] был более-менее простым — но, так как описанние было неполным вам было тяжело понять как его использовать. Поэтому этот атрибут пока что можно было считать бесполезным.\n" +
                "[Дитя ????] был ещё более странным. Вы никогда не слышал об этом атрибуте и понятия не имели, что он должен делать.");
            break;
        case '7':
            clearScreen();
            console.log("«Остановите караван! Приготовьтесь разбить лагерь!»\n" +
                "Следуя приказу главного солдата, дрожащие и измученные рабы остановились и упали на землю. Место, где дорога расширялась, образуя небольшую площадку, было частично защищено от ветра выступающим массивным камнем, однако всё равно было слишком холодно, чтобы спокойно отдохнуть.\n" +
                "Солдаты занялись тем, что согнали рабов в тесный круг, заставив их разделить тепло, и разожгли большой костёр в центре лагеря — но только после того, как занялись лошадьми. Тяжелую повозку с едой, водой и другими грузами, к которой была надёжно прикреплена главная цепь, продвинули вперёд, чтобы заслониться от ветра.\n" +
                "'Хммм... тут осталось только 51 раб... Хотя в начале нас... Стоп о чем ВЫ думаете?'.\n" +
                "Вскоре костёр уже пылал. Самые сильные рабы старались пробраться поближе к огню, а слабые, такие как вы, были вынуждены сидеть во внешней части круга, с замёрзшими от холода спинами. Естественно, любое движение было затруднено тем, что они всё ещё были прикованы к цепи. Поэтому знакомый широкоплечий раб остался там же, где и начал, несмотря на все свои попытки приблизиться к пламени.\n" +
                "«Проклятые ???!» — прошипел он, явно раздражённый.\n" +
                "Солдаты ходили среди рабов, раздавая им воду и еду. Вы, как и все остальные, получили несколько глотков ледяной воды и небольшой кусок твёрдого, заплесневелого хлеба. Несмотря на неаппетитный вид, Вы заставил себя съесть его целиком, только чтобы остаться таким же голодным.\n" +
                "Судя по всему, вы были такой не один.\n" +
                "Пронырливый раб, шедший до этого позади вас, в муках огляделся по сторонам.\n" +
                "«Клянусь всеми богами, даже в темнице меня кормили лучше!»\n" +
                "Он в отчаянии сплюнул на землю.\n" +
                "«И большинство из нас, невинных людей, в темнице ждали только виселицы!»\n" +
                "В нескольких шагах от них, там, где заканчивалась мощёная дорога и оставались лишь острые камни, в снегу росла россыпь ярко-красных ягод. Вы заметили их тут и там вдоль дороги. Вы даже отметили, как красиво эти жизнестойкие ягоды контрастируют на белом фоне. Глаза раба заблестели, и он на четвереньках попытался подползти к ним.\n" +
                "«Я бы не советовал тебе их есть, друг».\n" +
                "Это снова был раб с мягким голосом. Вы обернулись и, наконец, впервые увидел его воочию. Это был высокий мужчина лет сорока, худощавый и странно красивый, с достойным видом учёного.\n" +
                "«Опять ты со своими советами! Что?! Почему?!»\n" +
                "Учёный виновато улыбнулся.\n" +
                "«Эти ягоды называются Кровавая Гибель. Они растут в тех местах, где проливалась человеческая кровь. Вот почему их всегда много вдоль маршрутов работорговли».\n" +
                "«И что?»\n" +
                "Старший мужчина вздохнул.\n" +
                "«Кровавая Гибель ядовита. Нескольких ягод может быть достаточно, чтобы убить взрослого мужчину».\n" +
                "«Проклятие!»\n" +
                "Пронырливый раб вздрогнул и посмотрел на учёного.\n" +
                "Вы не обращали на них особого внимания.\n" +
                "Ведь, оглядываясь по сторонам, вы наконец поняли, что лагерь был расположен как раз в том месте, где в вашем видении, в начале Испытания, под снегом были погребены кости рабов. И вы готови были поспорить, что из-за чего бы они ни погибли, это произойдёт прямо сейчас.\n" +
                "Словно в ответ на ваши мысли, сверху раздался громоподобный грохот.\n" +
                "А в следующее мгновение что-то огромное рухнуло с неба...");
            break;
        case '8':
            clearScreen();
            console.log("Повернувшись в сторону громоподобного грохота, многие рабы подняли головы и увидели, что сверху на них падают камни и массивные куски льда. Они мгновенно запаниковали, бросившись в сторону под какофонию криков.\n" +
                "Вы оказались одним из немногих, кто остался стоять на ногах, в основном потому, что были готовы к подобному развитию событий. В следующую секунду кусок льда размером с тело человека упал на землю прямо перед ним и раскололся, осыпав всё вокруг острыми осколками.\n" +
                "Остальные были не настолько быстры. Поскольку с неба продолжали падать лёд и камни, многие были ранены, а некоторые даже сразу погибли. Воздух наполнили вопли агонии.\n" +
                "«Встаньте на ноги, глупцы! Идите к стене!»\n" +
                "Опытный солдат  — сердито кричал, пытаясь заставить рабов двигаться к относительной безопасности горного склона. Однако прежде чем кто-либо успел прислушаться к его приказу, что-то массивное рухнуло вниз, отчего под ногами задрожали камни. Оно упало прямо между караваном и горной стеной, на несколько секунд погрузив всё вокруг в тишину.\n" +
                "Сначала оно было похоже на комок грязного снега, приблизительно круглым по форме, и ростом с конного всадника. Однако когда существо расправило свои длинные конечности и встало, оно возвысилось над каменной площадкой, словно кошмарное предзнаменование смерти.\n" +
                "'Это чудовище... оно выглядит знакомо.'.\n" +
                "В тот момент когда чудовище посмотрело на вас, и Вы посмотрели на него, весь мир пред вами погрузился во тьму. Пропало все остались только Вы наедине с самим ВЫ. Ваше сердцо начало ускоренно биться, тело дрожало, но вы не двигались, так как страх сковавыл ваше тело словно цепями.\n" +
                "Кто то смотрел на вас, а Вы смотрели на него. Или же... ВЫ смотрели на Вы.\n" +
                "'Хах, как же это смешно, ты выглядишь так жалко, скрываясь за этими Вы или же ВЫ... Жалкий шут решивший убежать от всего... Хэй интересно способен ли ты ещё воспринимать свое настоящее Вы?'\n" +
                "Голос и слова неизвестного для вас ВЫ, вызывало у вас приступы животного страха, Вы дрожали как листик на дереве при урагане, ваши глаза хаотично бегали из стороны в сторону пытаясь не смотреть на ВЫ. Ваше тело пылало как будто его окунули в магму, колени дрожали, руки не слушались, голова трубила тревогу, а сердце хотело сбежать из этого тела.\n" +
                "'Неужели ты боишься меня? Как жалко, но это не помешает мне узнать то, что я хочу... Слушай меня внимательно'.\n" +
                "Его голос убавил вас, его молчание убивало вас, само его присутствие убивало вас. Но больше всего боли, доставляли его слова..\n" +
                "'ВЫ'.\n" +
                "Одного это слово выбило землю из под ваших ног, отправило вашу душу в глубины бездны... Вы не услышали это слово, Вы не поняли это слово, но это ранило вас слишком сильно, ваше тело стонало, разум медленно умирал, сердце билось слишком быстро. Вы упали на колени, Вы начали харкать кровью, Вы чувствовали, что смерть дышит вам в затылок. Но перед тем как смерть забрала вашу жизнь, ВЫ сказал вам пару слов..\n" +
                "Ты, отрицаешь себя, как и свое и...я, ты так жалок ВЫ. А ведь когда-то...\n" +
                "ДЛЯ ТОГО ЧТО БЫ ПЕРЕЙТИ НА СЛЕДУЮЩИЙ ЭТАП НАПИШИТЕ ЧТО 'ВЫ' ОТРИЦАЕТЕ!");
            break;
        case 'имя':
            clearScreen();
            console.log(" .\n" +
                "''.\n" +
                " .\n" +
                "\n" +
                "");
            rl.close();
            return;
        default:
            console.log("Неверная команда, попробуйте снова!");
    }
    let temp = rl.question("Введите что-нибудь для того, что бы продолжить",() => {
        promptUser()
    })
}

function promptUser(){
    setTimeout(showMenu,1000)
    setTimeout(() => {
        rl.question('Продолжить:', handleCommand);},1000)
}


promptUser();


